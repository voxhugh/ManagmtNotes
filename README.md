# Linux基础



**Linux 下文件和目录的特点**

* `.` 开头是隐藏文件，用 -a 显示
* **.** 代表当前目录
* **..** 代表上一级目录
* **文件**/**目录** 名称最长 `256` 个字符
* 所有的 **目录** 和 **文件名** 对大小写敏感

**目录下文件的详细信息**

​	权限 硬链接数 拥有者 组大小 时间 名称

<img src="https://github.com/voxhugh/Appendix/blob/main/Cpp_IMGs/Rights.png" style="zoom:70%;" />

**passwd 文件**

`/etc/passwd` 文件存放的是用户的信息，由 6 个分号组成的 7 个信息，分别是

1. 用户名
2. 密码（x，表示加密的密码）
3. UID（用户标识）
4. GID（组标识）
5. 用户全名或本地帐号
6. 家目录
7. 登录使用的 Shell，就是登录之后，使用的终端命令，`ubuntu` 默认是 `dash`



`/etc` 目录是专门用来保存 **系统配置信息** 的目录

`/etc/passwd` 是用于保存用户信息的文件

`/usr/bin/passwd` 是用于修改用户密码的程序

`/etc/group` 是用于保存组信息的文件



**`bin` 和 `sbin`**

* 在 `Linux` 中，绝大多数可执行文件都是保存在 `/bin`、`/sbin`、`/usr/bin`、`/usr/sbin`
* `/bin`（`binary`）是二进制执行文件目录，主要用于具体应用
* `/sbin`（`system binary`）是系统管理员专用的二进制代码存放目录，主要用于系统管理
* `/usr/bin`（`user commands for applications`）后期安装的一些软件
* `/usr/sbin`（`super user commands for applications`）超级用户的一些管理程序

> * `cd` 这个终端命令是内置在系统内核中的，没有独立的文件，因此用 `which` 无法找到 `cd` 命令的位置

## 终端命令

#### 基本操作

`tab`	自动补齐

`↑/↓`	曾经使用过的命令

`ctrl + c`	取消

`command --help`	显示 `command` 命令的帮助信息

`man command`      	查阅 `command` 命令的使用手册

| 操作键 | 功能                 |
| :----- | :------------------- |
| 空格   | 显示手册页的下一屏   |
| Enter  | 一次滚动手册页的一行 |
| b      | 回滚一屏             |
| f      | 前滚一屏             |
| q      | 退出                 |
| /word  | 搜索 **word** 字符串 |

| 通配符 | 含义                                 |
| ------ | ------------------------------------ |
| *      | 代表任意个数个字符                   |
| ?      | 代表任意一个字符，至少 1 个          |
| []     | 表示可以匹配字符组中的任一一个       |
| [abc]  | 匹配 a、b、c 中的任意一个            |
| [a-f]  | 匹配从 a 到 f 范围内的的任意一个字符 |

#### 文件操作

| cd    | 变更当前工作目录                       |
| ----- | -------------------------------------- |
| cd    | 切换到当前用户的主目录(/home/用户目录) |
| cd ~  | 切换到当前用户的主目录(/home/用户目录) |
| cd .  | 保持在当前目录不变                     |
| cd .. | 切换到上级目录                         |
| cd -  | 可以在最近两次工作目录之间来回切换     |

| ls   | 显示目录内容                                 |
| ---- | -------------------------------------------- |
| -a   | 显示指定目录下所有子目录与文件，包括隐藏文件 |
| -l   | 以列表方式显示文件的详细信息                 |
| -h   | 配合 -l 以人性化的方式显示文件大小           |

| rm   | 删除文件或目录                                        |
| ---- | ----------------------------------------------------- |
| -f   | 强制删除，忽略不存在的文件，无需提示                  |
| -r   | 递归地删除目录下的内容，**删除文件夹** 时必须加此参数 |

| cp   | 复制给定文件或目录至另一个文件或目录中                       |
| ---- | :----------------------------------------------------------- |
| -i   | 覆盖文件前提示                                               |
| -r   | 若源文件是目录文件，将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |

| cat  | 查看文件内容、创建文件、文件合并、追加文件内容等 |
| ---- | ------------------------------------------------ |
| -b   | 对非空输出行编号                                 |
| -n   | 对输出的所有行编号                               |

| grep | 文本搜索                                 |
| ---- | ---------------------------------------- |
| -n   | 显示匹配行及行号                         |
| -v   | 显示不包含匹配文本的所有行（相当于求反） |
| -i   | 忽略大小写                               |

| 参数 | 含义                         |
| ---- | ---------------------------- |
| ^a   | 行首，搜寻以 **a** 开头的行  |
| ke$  | 行尾，搜寻以 **ke** 结束的行 |

`touch`	创建文件或修改文件末次修改时间

`mkdir`	创建一个新的目录	[-p 递归]

`tree [目录名]`	  以树状图列出文件目录结构	[-d 只显示目录]

`cp 源文件 目标文件`	  复制文件或者目录

`mv 源文件 目标文件`	  移动文件或者目录／文件或者目录重命名

`mv` 	移动并重命名文件或目录

`more` 	分屏显示文件内容，每次显示一页

`echo`	显示参数指定的文字

`>`	输出

`>>`	追加

`|`	将一个命令的输出通过管道做为另一命令的输入

`find`	在特定的目录下搜索符合条件的文件	[-name "*.txt" 按名称]

`ln -s 被链接的源文件 链接文件`	建立文件的软链接	[-s 软链接]

#### 用户／组 权限

| usermod                     | 设置用户的主组／附加组和登录Shell |
| --------------------------- | --------------------------------- |
| usermod -g 组 用户名        | 修改用户的主组（passwd 中的 GID） |
| usermod -G 组 用户名        | 修改用户的附加组                  |
| usermod -s /bin/bash 用户名 | 修改用户登录 Shell                |

`su`	使用另一个用户的身份

`sudo`	以其他身份来执行命令，预设的身份为 `root`

`groupadd 组名`	  添加组

`groupdel 组名`	删除组

`cat /etc/group`	确认组信息

`chgrp -R 组名 文件/目录名`	递归修改文件/目录的所属组

`useradd -m -g 组 新建用户名`	  添加新用户	[-m 自动建立用户家目录，-g 指定用户所在的组]

`passwd 用户名`	设置用户密码

`userdel -r 用户名`	  删除用户	[自动删除用户家目录]

`cat /etc/passwd \| grep 用户名`	确认用户信息

`id [用户名]`	查看用户 UID 和 GID 信息

`who`	  查看当前所有登录的用户列表

`whoami`	  查看当前登录用户的账户名

`which` 	查看执行命令所在位置

`su - 用户名`	切换用户，并且切换目录	[  - 切换到用户家目录]

`exit`	  退出当前登录账户

`chown 用户名 文件名|目录名`	修改文件|目录的拥有者

`chgrp -R 组名 文件名|目录名`	递归修改文件|目录的组

`chmod +/-rwx 文件名|目录名`	修改用户／组对文件／目录的 读|写|执行 权限

#### 系统相关

| shutdown 选项 时间 | 关机／重新启动	[-r 重启]         |
| ------------------ | ----------------------------------- |
| shutdown -r now    | 重新启动操作系统，其中 now 表示现在 |
| shutdown now       | 立刻关机，其中 now 表示现在         |
| shutdown 20:25     | 系统在今天的 20:25 会关机           |
| shutdown +10       | 系统再过十分钟后自动关机            |
| shutdown -c        | 取消之前指定的关机计划              |

`date`	查看系统时间

`cal`	 查看日历，`-y` 选项可以查看一年的日历

`df -h`	显示磁盘剩余空间

`du -h [目录名]`	显示目录下的文件大小

`ps aux`	查看进程的详细状况

`top`	动态显示运行中的进程并且排序

`kill [-9] 进程代号`	  终止指定代号的进程，`-9` 表示强行终止

#### 网络

`ifconfig`	查看/配置计算机当前的网卡配置信息

`ping`	检测到目标 ip地址 的连接是否正常

#### SSH

`ssh 用户名@ip`	关机／重新启动	[-p port 指定端口号]

`scp 用户名@ip:文件名或路径 用户名@ip:文件名或路径`	远程复制文件

`ssh-keygen` 	生成 SSH 钥匙

`ssh-copy-id -p port user@remote`	上传公钥到服务器

**ssh配置别名，在 `~/.ssh/config` 下追加以下内容：**

```
Host 别名
    HostName ip地址
    User itheima
    Port 22
```

#### 打包&压缩

| 选项 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| c    | 生成档案文件，创建打包文件                                   |
| x    | 解开档案文件                                                 |
| v    | 列出归档解档的详细过程，显示进度                             |
| f    | 指定档案文件名称，f 后面一定是 .tar 文件，所以必须放选项最后 |

`tar -cvf 打包文件.tar 被打包的文件／路径...`	打包文件

`tar -xvf 打包文件.tar`	解包文件

`tar -zcvf 打包文件.tar.gz 被压缩的文件／路径...`	压缩文件

`tar -zxvf 打包文件.tar.gz`	解压缩文件

`tar -zxvf 打包文件.tar.gz -C 目标路径`	解压缩到指定路径	[-C 指定目录，必须存在]

`tar -jcvf 打包文件.tar.bz2 被压缩的文件／路径...`	压缩文件

`tar -jxvf 打包文件.tar.bz2`	解压缩文件

#### 其他

`sudo apt install 软件包`	安装软件

`sudo apt remove 软件名`	卸载软件

`sudo apt upgrade`	更新已安装的包



## Vim

Vim中共有三种模式： **命令模式**  **末行模式**  **编辑模式**



#### 命令模式

| vim 文件名 | 打开文件   |
| ---------- | ---------- |
| ZZ         | 保存退出   |
| gg=G       | 代码格式化 |

**光标移动**

`h`,`j`,`k`,`l`	光标移动

| 快捷键 | 功能               |
| ------ | ------------------ |
| 0      | 光标移动到行首     |
| $      | 光标移动到行尾部   |
| gg     | 光标移动到文件头   |
| G      | 光标移动到文件尾部 |
| nG     | 行跳转             |
| n+回车 | 相对跳转 n 行      |

**删除**

| 快捷键 | 功能               |
| ------ | ------------------ |
| x      | 删除光标后边的字符 |
| X      | 删除光标前边的字符 |
| dw     | 删除单词           |
| d0     | 删除光标前的字符串 |
| d$／D  | 删除光标后的字符串 |
| dd     | 删除光标所在行     |
| ndd    | 删除n行            |

**撤销／反撤销**

| 快捷键 | 功能   |
| ------ | ------ |
| u      | 撤销   |
| ctrl+r | 反撤销 |

**复制&粘贴**

| 快捷键 | 功能                      |
| ------ | ------------------------- |
| p      | 粘贴到光标所在行的下边    |
| P      | 粘贴到光标所在行的上边    |
| yy     | 复制光标所在行            |
| nyy    | 从光标所在行向下复制 n 行 |

**可视模式**

| 进入     | 模式     |
| -------- | -------- |
| v        | 字符可视 |
| V        | 行可视   |
| ctrl + v | 块可视   |

| 快捷键 | 功能                     |
| ------ | ------------------------ |
| d      | 删除(剪切)               |
| y      | 复制                     |
| p      | 数据粘贴到光标的后边     |
| P      | 数据粘贴到光标的前边     |
| I      | "insert"模式（例如：//） |

**替换**

| 快捷键 | 功能                 | 备注            |
| ------ | -------------------- | --------------- |
| r      | 替换光标后的单个字符 |                 |
| R      | 替换光标后的多个字符 | 按 esc 结束替换 |

**查找**

| 搜索快捷键 | 关键字遍历 | 描述           | 备注                           |
| ---------- | ---------- | -------------- | ------------------------------ |
| /          | n          | 从当前位置向下 |                                |
|            | N          | 从当前位置向上 |                                |
| ?          | n          | 从当前位置向上 |                                |
|            | N          | 从当前位置向下 |                                |
| #          | n          | 从当前位置向上 | 光标需要先放在被搜索的关键字上 |
|            | N          | 从当前位置向下 |                                |

**查看man文档**

| 章节      | 说明                                      |
| --------- | ----------------------------------------- |
| section 1 | Linux提供的所有shell命令                  |
| section 2 | 系统函数（由内核提供的）                  |
| section 3 | 库调函数(程序库中的函数)                  |
| section 4 | 特殊文件(通常在/dev目录中可以找到)        |
| section 5 | 系统配置文件格式和约定，比如：/etc/passwd |
| section 6 | 游戏（如果有的话）                        |
| section 7 | 杂项(包括宏包和约定)                      |
| section 8 | 系统管理命令(通常仅针对root用户)          |
| section 9 | 内核例程[非标准]                          |

```shell
# 查询第三章的标准的库函数 (如: fread, fwrite, fopen 等)
$ man 3 fread
# vim命令模式直接跳转man文档：光标移至该函数上
$ [章节号] + K
```



#### 编辑模式

| 进入 | 功能                                                     |
| ---- | -------------------------------------------------------- |
| i    | 从光标前边开始输入                                       |
| a    | 从光标的后边开始输入                                     |
| o    | 在光标下边创建新行, 在新行中输入                         |
| s    | 删除光标后边的字符(盖住的字符), 从删除的字符位置开始输入 |
| I    | 从当前行行首开始输入                                     |
| A    | 从当前行行尾开始输入                                     |
| O    | 在光标上边创建新行, 在新行中输入                         |
| S    | 删除当前行, 在当前行开始输入                             |



#### 末行模式

| :       | 进入 |
| ------- | ---- |
| Esc × 2 | 退出 |

**保存退出**

| 命令 | 功能         |
| ---- | ------------ |
| q    | 退出（提示） |
| q!   | 强制退出     |
| w    | 保存         |
| wq   | 保存退出     |
| x    | 保存退出     |

